<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar System Movie Connections</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 20px;
            font-family: 'Space Mono', 'Courier New', monospace;
            background: #0a0e27;
            min-height: 100vh;
            color: #e0e0e0;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: linear-gradient(180deg, #0f1729 0%, #1a1f3a 100%);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        h1 {
            text-align: center;
            color: #ffffff;
            margin-bottom: 10px;
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 0 0 20px rgba(100, 200, 255, 0.5);
        }

        .subtitle {
            text-align: center;
            color: #b0b8d0;
            margin-bottom: 30px;
            font-size: 0.9em;
            line-height: 1.7;
        }

        #solar-system {
            width: 100%;
            height: 900px;
            border: none;
            border-radius: 8px;
            background: radial-gradient(ellipse at center, #1a1f3a 0%, #0a0e27 100%);
            position: relative;
            overflow: visible;
        }

        .info-section {
            margin-top: 30px;
            padding: 20px;
            background: rgba(26, 31, 58, 0.6);
            border-radius: 8px;
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        .info-section h3 {
            margin-top: 0;
            color: #ffffff;
            font-weight: 700;
            font-size: 1em;
        }

        .info-section p {
            color: #b0b8d0;
            line-height: 1.7;
            font-size: 0.85em;
        }

        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            padding: 15px;
            background: rgba(26, 31, 58, 0.6);
            border-radius: 8px;
            font-size: 0.85em;
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-line {
            width: 30px;
            height: 3px;
            background: #64c8ff;
            opacity: 0.6;
        }

        .back-button {
            display: inline-block;
            padding: 10px 20px;
            background: #3b5998;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 20px;
            transition: all 0.3s;
            font-weight: 400;
            font-family: 'Space Mono', monospace;
            font-size: 0.85em;
        }

        .back-button:hover {
            background: #2d4373;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 89, 152, 0.4);
        }

        .stats {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(26, 31, 58, 0.6);
            border-radius: 8px;
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: #64c8ff;
        }

        .stat-label {
            font-size: 0.75em;
            color: #b0b8d0;
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 12px 16px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            max-width: 350px;
            line-height: 1.6;
            border: 1px solid rgba(100, 200, 255, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        @keyframes pulse {
            0%, 100% {
                stroke-opacity: 0.3;
            }
            50% {
                stroke-opacity: 0.8;
            }
        }

        @keyframes glow {
            0%, 100% {
                filter: drop-shadow(0 0 8px rgba(255, 200, 100, 0.8));
            }
            50% {
                filter: drop-shadow(0 0 20px rgba(255, 200, 100, 1));
            }
        }

        circle.sun {
            filter: drop-shadow(0 0 30px rgba(255, 200, 100, 0.8));
            animation: glow 4s ease-in-out infinite;
        }

        circle.planet {
            cursor: pointer;
            transition: all 0.3s;
        }

        circle.planet:hover {
            stroke-width: 3;
            filter: drop-shadow(0 0 10px currentColor);
        }

        circle.moon {
            cursor: pointer;
            transition: all 0.3s;
        }

        circle.moon:hover {
            stroke-width: 2;
            filter: drop-shadow(0 0 8px currentColor);
        }

        .orbit-path {
            fill: none;
            stroke: rgba(100, 200, 255, 0.15);
            stroke-width: 1;
            stroke-dasharray: 5, 5;
        }

        text.planet-label {
            font-size: 11px;
            fill: #b0b8d0;
            text-anchor: middle;
            pointer-events: none;
            font-family: 'Space Mono', monospace;
        }

        path.connection {
            fill: none;
            stroke: #64c8ff;
            stroke-width: 2;
            stroke-opacity: 0.3;
            cursor: pointer;
            animation: pulse 3s ease-in-out infinite;
            transition: stroke-width 0.2s, stroke-opacity 0.2s;
        }

        path.connection.highlighted {
            stroke-width: 4;
            stroke-opacity: 0.9;
            animation: none;
            filter: drop-shadow(0 0 8px rgba(100, 200, 255, 0.8));
        }

        .decade-selector {
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(26, 31, 58, 0.6);
            border-radius: 8px;
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        .decade-selector-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #ffffff;
        }

        .decade-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .decade-btn {
            padding: 8px 16px;
            font-family: 'Space Mono', monospace;
            font-size: 11px;
            background: rgba(59, 89, 152, 0.3);
            border: 2px solid rgba(100, 200, 255, 0.3);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            color: #b0b8d0;
        }

        .decade-btn:hover {
            background: rgba(59, 89, 152, 0.5);
            border-color: rgba(100, 200, 255, 0.5);
        }

        .decade-btn.active {
            background: #3b5998;
            color: white;
            border-color: #64c8ff;
        }

        .decade-btn.all {
            background: rgba(100, 200, 255, 0.2);
            border-color: rgba(100, 200, 255, 0.4);
        }

        .decade-btn.all.active {
            background: #64c8ff;
            color: #0a0e27;
            border-color: #64c8ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Solar System Movie Connections</h1>
        <p class="subtitle">
            Journey paths showing space travel in science fiction - from Earth to distant worlds
        </p>

        <div class="decade-selector">
            <div class="decade-selector-title">Filter by Decade:</div>
            <div class="decade-buttons" id="decadeButtons"></div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="connectionCount">0</div>
                <div class="stat-label">Space Journeys</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="locationCount">0</div>
                <div class="stat-label">Destinations</div>
            </div>
        </div>

        <div id="solar-system"></div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-line"></div>
                <span>Space Journey Path</span>
            </div>
            <div class="legend-item">
                <svg width="16" height="16">
                    <circle cx="8" cy="8" r="6" fill="#ffa500" stroke="#ffcc66" stroke-width="2"/>
                </svg>
                <span>Sun</span>
            </div>
            <div class="legend-item">
                <svg width="16" height="16">
                    <circle cx="8" cy="8" r="4" fill="#4a90e2" stroke="#64c8ff" stroke-width="2"/>
                </svg>
                <span>Planet</span>
            </div>
        </div>

        <div class="info-section">
            <h3>About This Map</h3>
            <p>
                This visualization shows the journey paths of science fiction movies set in space.
                Animated arcs connect Earth to various destinations in our solar system and beyond,
                representing the voyages depicted in films and TV shows.
            </p>
            <p>
                <strong>How to use:</strong> Hover over connection arcs to see movie details including title,
                year, and rating. Filter by decade to see how space travel themes have evolved over time.
                The arcs pulse gently to show the direction of travel from origin to destination.
            </p>
        </div>

        <div style="text-align: center;">
            <a href="/connection-map.html" class="back-button">← Back to Connection Map</a>
        </div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        // Space journey connections data
        const spaceConnections = [
            // Movies with clear Earth → Space journeys
            {"movie": "2001: A Space Odyssey", "year": "1968", "rating": "8.3", "from": "Earth", "to": "Jupiter"},
            {"movie": "Contact", "year": "1997", "rating": "7.4", "from": "Earth", "to": "Deep Space"},
            {"movie": "Europa Report", "year": "2013", "rating": "6.5", "from": "Earth", "to": "Europa"},
            {"movie": "Moon", "year": "2009", "rating": "8.0", "from": "Earth", "to": "Moon"},
            {"movie": "Mr. Nobody", "year": "2009", "rating": "7.9", "from": "Earth", "to": "Mars"},
            {"movie": "The Martian", "year": "2015", "rating": "8.2", "from": "Earth", "to": "Mars"},
            {"movie": "The Fifth Element", "year": "1997", "rating": "7.6", "from": "Earth", "to": "Deep Space"},
            {"movie": "The Hitchhiker's Guide to the Galaxy", "year": "2005", "rating": "6.8", "from": "Earth", "to": "Deep Space"},
            {"movie": "The Signal", "year": "2014", "rating": "6.2", "from": "Earth", "to": "Deep Space"},
            {"movie": "Doctor Who", "year": "1964", "rating": "8.9", "from": "Earth", "to": "Deep Space"},
            {"movie": "Hitchhiker's Guide to the Galaxy", "year": "1981", "rating": "8.0", "from": "Earth", "to": "Deep Space"},
            {"movie": "Stargate Atlantis", "year": "2004", "rating": "8.1", "from": "Earth", "to": "Deep Space"},
            {"movie": "Stargate SG1", "year": "1997", "rating": "8.5", "from": "Earth", "to": "Deep Space"},
            {"movie": "The 100", "year": "2014", "rating": "7.7", "from": "Earth", "to": "Deep Space"},

            // Missions to Sun (Sunshine)
            {"movie": "Sunshine", "year": "2007", "rating": "7.3", "from": "Earth", "to": "Sun"},

            // Deep space to planets (return journeys, explorations)
            {"movie": "Cargo", "year": "2009", "rating": "6.2", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Forbidden Planet", "year": "1956", "rating": "7.6", "from": "Earth", "to": "Deep Space"},
            {"movie": "Screamers", "year": "1995", "rating": "6.3", "from": "Earth", "to": "Deep Space"},
            {"movie": "Serenity (Firefly)", "year": "2005", "rating": "8.0", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Solaris (1972)", "year": "1972", "rating": "8.1", "from": "Earth", "to": "Deep Space"},
            {"movie": "Solaris (2002)", "year": "2002", "rating": "6.2", "from": "Earth", "to": "Deep Space"},
            {"movie": "Star Trek II", "year": "1982", "rating": "7.7", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Babylon 5", "year": "1994", "rating": "8.2", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Battlestar Galactica", "year": "2004", "rating": "8.8", "from": "Deep Space", "to": "Earth"},
            {"movie": "Blakes 7", "year": "1978", "rating": "8.0", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Farscape", "year": "1999", "rating": "8.4", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Firefly", "year": "2002", "rating": "9.2", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Red Dwarf", "year": "1988", "rating": "8.5", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Star Trek: Deep Space Nine", "year": "1993", "rating": "7.9", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Star Trek: Discovery", "year": "2017", "rating": "7.3", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Star Trek: Enterprise", "year": "2001", "rating": "7.5", "from": "Earth", "to": "Deep Space"},
            {"movie": "Star Trek: The Next Generation", "year": "1987", "rating": "8.7", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "Star Trek: The Original Series", "year": "1966", "rating": "8.4", "from": "Earth", "to": "Deep Space"},
            {"movie": "Stargate Universe", "year": "2009", "rating": "7.7", "from": "Deep Space", "to": "Deep Space"},
            {"movie": "The Orville", "year": "2017", "rating": "7.9", "from": "Deep Space", "to": "Deep Space"}
        ];

        let tooltip;
        let selectedDecade = null;
        let allConnections = spaceConnections;
        let svg, connectionGroup, celestialGroup;

        function getDecade(year) {
            const y = parseInt(year);
            if (isNaN(y)) return null;
            return Math.floor(y / 10) * 10;
        }

        function createDecadeButtons() {
            const decades = new Set();
            allConnections.forEach(conn => {
                const decade = getDecade(conn.year);
                if (decade) decades.add(decade);
            });

            const sortedDecades = Array.from(decades).sort((a, b) => a - b);
            const buttonsContainer = document.getElementById('decadeButtons');
            buttonsContainer.innerHTML = '';

            const allBtn = document.createElement('button');
            allBtn.className = 'decade-btn all active';
            allBtn.textContent = 'All';
            allBtn.onclick = () => {
                selectedDecade = null;
                updateDecadeButtons();
                updateVisualization();
            };
            buttonsContainer.appendChild(allBtn);

            sortedDecades.forEach(decade => {
                const btn = document.createElement('button');
                btn.className = 'decade-btn';
                btn.textContent = `${decade}s`;
                btn.dataset.decade = decade;
                btn.onclick = () => {
                    selectedDecade = decade;
                    updateDecadeButtons();
                    updateVisualization();
                };
                buttonsContainer.appendChild(btn);
            });
        }

        function updateDecadeButtons() {
            const buttons = document.querySelectorAll('.decade-btn');
            buttons.forEach(btn => {
                if (!btn.dataset.decade) {
                    btn.classList.toggle('active', selectedDecade === null);
                } else {
                    const decade = parseInt(btn.dataset.decade);
                    btn.classList.toggle('active', selectedDecade === decade);
                }
            });
        }

        function getFilteredConnections() {
            if (selectedDecade === null) return allConnections;
            return allConnections.filter(c => getDecade(c.year) === selectedDecade);
        }

        function updateVisualization() {
            const filteredConnections = getFilteredConnections();

            // Update stats
            document.getElementById('connectionCount').textContent = filteredConnections.length;
            const uniqueLocations = new Set();
            filteredConnections.forEach(c => {
                uniqueLocations.add(c.from);
                uniqueLocations.add(c.to);
            });
            document.getElementById('locationCount').textContent = uniqueLocations.size;

            // Redraw the solar system with filtered connections
            drawSolarSystem(filteredConnections);
        }

        function drawSolarSystem(connections) {
            const container = document.getElementById('solar-system');
            container.innerHTML = '';

            const width = container.clientWidth;
            const height = 900;
            const centerX = width / 2;
            const centerY = height / 2;

            svg = d3.select('#solar-system')
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            // Create tooltip
            if (!tooltip) {
                tooltip = d3.select('body')
                    .append('div')
                    .attr('class', 'tooltip')
                    .style('opacity', 0);
            }

            // Add stars in background
            for (let i = 0; i < 150; i++) {
                svg.append('circle')
                    .attr('cx', Math.random() * width)
                    .attr('cy', Math.random() * height)
                    .attr('r', Math.random() * 1.5)
                    .attr('fill', 'white')
                    .attr('opacity', Math.random() * 0.7 + 0.3);
            }

            // Define celestial bodies with their properties and positions
            const positions = {
                'Sun': { x: centerX, y: centerY, r: 25, color: '#ffa500', stroke: '#ffcc66' },
                'Earth': { x: centerX - 130, y: centerY + 50, r: 9, color: '#4a90e2', stroke: '#64c8ff' },
                'Moon': { x: centerX - 105, y: centerY + 65, r: 3, color: '#888', stroke: '#aaa' },
                'Mars': { x: centerX - 170, y: centerY - 30, r: 7, color: '#cd5c5c', stroke: '#ff6b6b' },
                'Jupiter': { x: centerX + 250, y: centerY - 80, r: 18, color: '#daa520', stroke: '#f4c542' },
                'Europa': { x: centerX + 275, y: centerY - 60, r: 4, color: '#c9d4e0', stroke: '#dde8f0' },
                'Deep Space': { x: width - 150, y: 100, r: 8, color: '#6a5acd', stroke: '#8a7ae0' }
            };

            // Create groups for layering
            connectionGroup = svg.append('g').attr('class', 'connections');
            celestialGroup = svg.append('g').attr('class', 'celestial-bodies');

            // Draw orbit paths for visual effect
            const orbitBodies = ['Earth', 'Mars', 'Jupiter'];
            orbitBodies.forEach(bodyName => {
                const body = positions[bodyName];
                const dist = Math.sqrt(Math.pow(body.x - centerX, 2) + Math.pow(body.y - centerY, 2));
                svg.append('circle')
                    .attr('class', 'orbit-path')
                    .attr('cx', centerX)
                    .attr('cy', centerY)
                    .attr('r', dist)
                    .lower();
            });

            // Draw connections
            connections.forEach((conn, index) => {
                const from = positions[conn.from];
                const to = positions[conn.to];

                if (!from || !to) return;

                const start = [from.x, from.y];
                const end = [to.x, to.y];

                // Create curved path
                const dx = end[0] - start[0];
                const dy = end[1] - start[1];
                const dr = Math.sqrt(dx * dx + dy * dy) * 1.3;

                connectionGroup.append('path')
                    .attr('class', 'connection')
                    .attr('data-movie', conn.movie)
                    .attr('d', `M${start[0]},${start[1]}A${dr},${dr} 0 0,1 ${end[0]},${end[1]}`)
                    .style('animation-delay', `${(index * 0.05) % 3}s`)
                    .on('mouseover', function(event) {
                        const currentMovie = d3.select(this).attr('data-movie');

                        // Highlight all segments from the same movie
                        connectionGroup.selectAll('.connection').each(function() {
                            const path = d3.select(this);
                            if (path.attr('data-movie') === currentMovie) {
                                path.classed('highlighted', true);
                            }
                        });

                        tooltip.transition()
                            .duration(200)
                            .style('opacity', 0.95);

                        tooltip.html(`
                            <strong>${conn.movie}</strong> (${conn.year})<br/>
                            Rating: ⭐ ${conn.rating}<br/>
                            Journey: ${conn.from} → ${conn.to}
                        `)
                            .style('left', (event.pageX + 15) + 'px')
                            .style('top', (event.pageY - 28) + 'px');
                    })
                    .on('mouseout', function() {
                        // Remove highlighting from all segments
                        connectionGroup.selectAll('.connection')
                            .classed('highlighted', false);

                        tooltip.transition()
                            .duration(500)
                            .style('opacity', 0);
                    });
            });

            // Draw celestial bodies
            Object.entries(positions).forEach(([name, body]) => {
                const isSun = name === 'Sun';
                const isMoon = name === 'Moon' || name === 'Europa';

                celestialGroup.append('circle')
                    .attr('class', isSun ? 'sun' : (isMoon ? 'moon' : 'planet'))
                    .attr('cx', body.x)
                    .attr('cy', body.y)
                    .attr('r', body.r)
                    .attr('fill', body.color)
                    .attr('stroke', body.stroke)
                    .attr('stroke-width', isMoon ? 1 : 2)
                    .on('mouseover', function(event) {
                        if (!isSun) {
                            d3.select(this).attr('r', body.r * 1.3);
                        }

                        tooltip.transition()
                            .duration(200)
                            .style('opacity', 0.95);
                        tooltip.html(`<strong>${name}</strong>`)
                            .style('left', (event.pageX + 15) + 'px')
                            .style('top', (event.pageY - 28) + 'px');
                    })
                    .on('mouseout', function() {
                        if (!isSun) {
                            d3.select(this).attr('r', body.r);
                        }

                        tooltip.transition()
                            .duration(500)
                            .style('opacity', 0);
                    });

                // Add labels
                celestialGroup.append('text')
                    .attr('class', 'planet-label')
                    .attr('x', body.x)
                    .attr('y', body.y + body.r + 15)
                    .text(name);
            });
        }

        // Initialize
        createDecadeButtons();
        updateVisualization();
    </script>
</body>
</html>
